# Timbot - App Configuration
# Used by deployment scripts and Ansible for metadata

name: timbot
description: Twitch/Discord integration bot for clips, live alerts, and voice management
version: "1.0.4"
image: harbor.dev.thebozic.com/timbot/timbot:latest
build: false  # Pre-built image from Harbor registry

# Domain configuration (not needed - bot doesn't expose HTTP)
domain: null

# Secrets configuration
secrets:
  infisical_path: /services/timbot
  required:
    - DISCORD_BOT_TOKEN       # Discord bot token
    - DISCORD_GUILD_ID        # Discord server ID
    - TWITCH_CLIENT_ID        # Twitch application client ID
    - TWITCH_CLIENT_SECRET    # Twitch application client secret
  optional:
    - CLIPS_CHANNEL_ID        # Channel for clip posts
    - LIVE_ALERTS_CHANNEL_ID  # Channel for live notifications
    - VOICE_CATEGORY_ID       # Category for voice channels
    - TWITCH_OWNER_CHANNELS   # Comma-separated Twitch channel names
    - STREAMER_ROLE_ID        # Role ID for streamers

# Backup configuration
backup:
  enabled: true
  paths:
    - ./data                  # Persistent state (posted clips, stream states)
  exclude:
    - ./data/logs             # Logs don't need backup
  stop_during_backup: false   # Can backup while running

# Restore configuration
restore:
  enabled: true
  priority: 50                # Medium priority
  pre_restore: null
  post_restore: null

# Dependencies
dependencies: []              # No dependencies on other homelab services

# Resource limits
resources:
  memory_limit: 128M
  cpu_limit: "0.25"

# Health check
healthcheck:
  type: process               # Check if bot process is running
  interval: 30s
  timeout: 10s

# Tags
tags:
  - discord
  - twitch
  - bot
  - social
