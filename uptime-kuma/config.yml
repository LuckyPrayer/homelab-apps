# Uptime Kuma - App Configuration
# Used by deployment scripts and Ansible for metadata

name: uptime-kuma
description: Self-hosted status monitoring tool for external service checks
version: "1"
image: louislam/uptime-kuma:1

# Host restriction - only deploy/backup/restore on these hosts
allowed_hosts:
  - pharos-dev
  - pharos-prod

# Domain configuration
domain:
  prefix: status              # Results in status.{env}.{base_domain}
  port: 3001                  # Internal container port

# Deployment target
deployment:
  hosts:
    - pharos-dev
    - pharos-prod
  reason: External monitoring from AWS to verify homelab accessibility

# Secrets configuration
secrets:
  infisical_path: /services/uptime-kuma
  per_app_token: false        # No secrets required for basic setup
  generate_env_file: false
  required: []
  optional: []

# Backup configuration  
backup:
  enabled: true
  paths:
    - ./data                  # SQLite database with monitors, notifications, etc.
  retention_days: 30
  # Status monitoring data is important but can be recreated if needed
  priority: medium

# Resource limits (t2.micro has limited resources)
resources:
  memory_limit: 256M
  memory_reservation: 128M

# Monitoring endpoints to configure after deployment
# These are suggestions - actual configuration done via Uptime Kuma UI
suggested_monitors:
  - name: "Homepage (Prod)"
    url: "https://home.thebozic.com"
    type: http
  - name: "Vaultwarden (Prod)"
    url: "https://vaultwarden.thebozic.com"
    type: http
  - name: "Harbor Registry (Prod)"
    url: "https://harbor.thebozic.com"
    type: http
  - name: "Grafana (Prod)"
    url: "https://grafana.thebozic.com"
    type: http
  - name: "n8n (Prod)"
    url: "https://n8n.thebozic.com"
    type: http
  - name: "Mealie (Prod)"
    url: "https://mealie.thebozic.com"
    type: http
  - name: "Docs (Prod)"
    url: "https://docs.thebozic.com"
    type: http
